TODO:

Functionize & standarize block reading after if, while and for
Upgrade operator collapsing

